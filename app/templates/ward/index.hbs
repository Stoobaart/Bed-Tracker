<div class="ward-details">
  {{#if this.model.showSuccessMessage}}
    <div class="banner banner--success">
      <div class="banner_title"><img src="/assets/images/success.svg" alt="">COVID beds added successfully</div>
      <p>The beds are ready for patients</p>
      <img src="/assets/images/close.svg" alt="close" class="banner_close" {{on "click" (fn (mut this.model.showSuccessMessage) null)}}>
    </div>
  {{/if}}

  <div class="breadcrumbs">
    <LinkTo @route="dashboard" @tagName="span">
      <img src="/assets/images/hospital.svg" alt="">
      <div class="text">Dashboard</div>
    </LinkTo> > Ward {{this.model.shortName}}
  </div>
  <h1>{{this.model.shortName}}</h1>
  <p>{{this.model.longName}}</p>

  <div class="card">
    <div class="card_header">
      <img class="card_icon" src="/assets/images/occupied.svg" alt="">
      <div class="card_header-text">WARD TOTAL COVID BEDS  {{this.totalBeds}}</div>
    </div>

    <div class="card_data-block">
      <div class="card_data-block--value">{{this.availableBeds}}</div>
      <div class="card_data-block--label">Total available COVID beds</div>
    </div>

    <div class="card_data-block">
      <div class="card_data-block--value">{{this.availableBedsPercentage}}%</div>
      <div class="card_data-block--label">Total available bed capacity</div>
    </div>

    <div class="card_data-block">
      <div class="card_data-block--value">{{this.totalVentilatorInUse}}</div>
      <div class="card_data-block--label">Total ventilators in use</div>
    </div>
  </div>

  <div class="card">
    <div class="card_header">
      <img class="card_icon" src="/assets/images/covid-19-positive.svg" alt="">
      <div class="card_header-text">TOTAL COVID PATIENT STATS</div>
    </div>

    <div class="card_data-block">
      <div class="card_data-block--value">{{this.totalCovidStatusPositive}}</div>
      <div class="card_data-block--label">Total COVID positive</div>
    </div>

    <div class="card_data-block">
      <div class="card_data-block--value">{{this.totalCovidStatusNegative}}</div>
      <div class="card_data-block--label">Total COVID negative</div>
    </div>

    <div class="card_data-block">
      <div class="card_data-block--value">{{this.totalCovidStatusSuspected}}</div>
      <div class="card_data-block--label">Total COVID suspected</div>
    </div>
  </div>
</div>

{{#if this.model.beds}}
  <div class="ward-beds--top-bar">
    <div class="header">COVID beds</div>
    <LinkTo class="link-button" role="button" @route="ward.add-beds" @model={{this.model.id}}>
      <img src="/assets/images/plus.svg" alt="">
        Add beds
    </LinkTo>
  </div>

  <div class="ward-beds">
    <div class="header">
      <div class="header--column">
        <img class="icon" src="/assets/images/cross-no-bg.svg" alt="">
        Availability
      </div>
      <div class="header--column">
        <img class="icon" src="/assets/images/covid-19-positive.svg" alt="">
        COVID
      </div>
      <div class="header--column">
        <img class="icon" src="/assets/images/white.svg" alt="">
        Ventilation
      </div>
    </div>

    {{#each this.model.beds as |bed index|}}
      <div class="ward-beds_card">
        <div class="bed-number">{{plus-one index}}</div>
        {{#if bed.available}}
          <div class="column column--available" role="button" {{on "click" (fn this.openEditBedModal bed index)}}>
            <img class="icon" src="/assets/images/empty-new.svg" alt="">
            Available
          </div>
        {{else}}
          <div class="column">
            Occupied
          </div>
          <div class="column">
            {{bed.covidStatus}}
          </div>
          <div class="column">
            {{bed.ventilatorInUse}}
          </div>
        {{/if}}
      </div>
    {{/each}}

  </div>
{{/if}}

{{#if this.editBedModalIsOpen}}
  <ModalDialog @onClose={{this.closeModal}} @targetAttachment="center" @attachment="middle" @hasOverlay={{true}}>
    <div class="header">Change status of bed {{this.bedInMemory.index}}</div>

    <form>
      <div class="subheader">The patient occupying the bed is:</div>

      {{!-- <div class="edit-beds_radio">
        <input
          id="positive"
          type="radio"
          checked={{this.patientPositive}}
          onclick={{action this.setCovidStatus}}>
        <label for="positive" class="edit-beds_radio--label">
          <div class="edit-beds_radio--text">Mobile device QR scanning only</div>
        </label>
      </div> --}}
    </form>
    
  </ModalDialog>
{{/if}}